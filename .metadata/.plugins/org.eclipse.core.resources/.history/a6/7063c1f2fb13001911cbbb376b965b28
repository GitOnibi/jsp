<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="sql" uri="http://java.sun.com/jsp/jstl/sql" %>
<%
	String subNams[] = {"컴퓨터이론", "C++", "정보통신"};
	String subNums[] = {"c001", "c002", "c003"};
%>
<c:set var="sub_names" value="<%=subNams %>" />
<c:set var="sub_numes" value="<%=subNums %>" />
<%--
<c:choose>
	<c:when test="${ param.stu_name == null && param.dep_name ==null && param.stu_num == null }">
		<script type="text/javascript">alert("값을 모두 입력해 주세요");</script>
		<c:redirect url="stu_input.jsp">
			<c:param name="stu_name" value="${ param.stu_name }" />
			<c:param name="dep_name" value="${ param.dep_name }" />
			<c:param name="stu_num" value="${ param.stu_num }" />
		</c:redirect>
	</c:when>
	<c:when test="">
		<script type="text/javascript">alert("하나 이상의 과목을 체크하세요");</script>
		<c:redirect url="stu_input.jsp">
			<c:param name="stu_name" value="${ param.stu_name }" />
			<c:param name="dep_name" value="${ param.dep_name }" />
			<c:param name="stu_num" value="${ param.stu_num }" />
		</c:redirect>
	</c:when>
	<c:otherwise>
 --%>
		<c:forEach items="${ paramValues.dep_ck }" var="ck" varStatus="stat">
			<sql:update var="rs" dataSource="jdbc/OracleDB">
				INSERT INTO SCHOOL_STUDENT(STU_NAME, DEP_NAME, STU_NUM, SUB_NAME, SUB_NUM) VALUES(?, ?, ?, ?, ?);
				<sql:param value="${ param.stu_name }" />
				<sql:param value="${ param.dep_name }" />
				<sql:param value="${ param.stu_num }" />
				<sql:param value="${ sub_nams[ck - 1] }" />
				<sql:param value="${ sub_nums[ck - 1] }" />
			</sql:update>
		</c:forEach>
<%--
	</c:otherwise>
</c:choose>
 --%>